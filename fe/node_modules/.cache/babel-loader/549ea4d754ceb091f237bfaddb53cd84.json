{"ast":null,"code":"var _jsxFileName = \"/Users/superstar_pkb/project/BitCamp Team Project V2/fe/src/webapp/art/component/Modify/ModifyUpload.js\";\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { ArtService } from 'webapp/art';\nimport { addFileList } from 'webapp/art/reducer/art.reducer';\nimport ModifyFile from './ModifyFile';\n\nconst ModifyUpload = ({\n  fileParam = []\n}) => {\n  const dispatch = useDispatch();\n  const fileList = useSelector(state => state.arts.fileList);\n  console.log(\"fname: \" + fileList.file);\n  const [uploadResult, setUploadResult] = useState(fileParam);\n  console.log(\"qqqqqqqq\", fileParam);\n\n  const uploadFile = async e => {\n    e.preventDefault();\n    console.dir(e.target.files);\n    const formData = new FormData();\n    const files = e.target.files;\n\n    for (let i = 0; i < files.length; i++) {\n      formData.append(\"files\", files[i]);\n    }\n\n    ArtService.artUpload(formData).then(res => {\n      console.log(\"res: \", res);\n      res.data.forEach(uploadFileInfo => {\n        uploadResult.push(uploadFileInfo);\n        dispatch(addFileList({\n          uuid: uploadFileInfo.uuid,\n          file: uploadFileInfo\n        }));\n      });\n      console.log(\"uploadResult Before\", uploadResult);\n      setUploadResult(uploadResult.slice(0));\n      console.log(\"uploadResult After\", uploadResult);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-12 col-sm-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"message\",\n    className: \"dark-color\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 11\n    }\n  }, \"\\uD30C\\uC77C \\uCCA8\\uBD80\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    name: \"files\",\n    accept: \"image/*\",\n    className: \"md-input style-02 input_white\",\n    id: \"files\",\n    multiple: true,\n    \"data-error\": \"\\uC791\\uD488 \\uD30C\\uC77C\\uC744 \\uCCA8\\uBD80\\uD574\\uC8FC\\uC138\\uC694.\",\n    onChange: e => uploadFile(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 11\n    }\n  }), fileList === null || fileList === void 0 ? void 0 : fileList.map(fileObj => {\n    return /*#__PURE__*/React.createElement(ModifyFile, Object.assign({\n      key: fileObj.uuid\n    }, fileObj.file, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 15\n      }\n    }));\n  }))));\n};\n\nexport default ModifyUpload;","map":{"version":3,"sources":["/Users/superstar_pkb/project/BitCamp Team Project V2/fe/src/webapp/art/component/Modify/ModifyUpload.js"],"names":["React","useState","useDispatch","useSelector","ArtService","addFileList","ModifyFile","ModifyUpload","fileParam","dispatch","fileList","state","arts","console","log","file","uploadResult","setUploadResult","uploadFile","e","preventDefault","dir","target","files","formData","FormData","i","length","append","artUpload","then","res","data","forEach","uploadFileInfo","push","uuid","slice","map","fileObj"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { ArtService } from 'webapp/art'\nimport { addFileList } from 'webapp/art/reducer/art.reducer'\nimport ModifyFile from './ModifyFile'\n\nconst ModifyUpload = ({ fileParam = [] }) => {\n\n  const dispatch = useDispatch()\n  const fileList = useSelector(state => state.arts.fileList)\n  console.log(\"fname: \" + fileList.file)\n\n  const [uploadResult, setUploadResult] = useState(fileParam)\n  console.log(\"qqqqqqqq\", fileParam)\n\n  const uploadFile = async (e) => {\n    e.preventDefault()\n\n    console.dir(e.target.files)\n\n    const formData = new FormData()\n    const files = e.target.files\n    \n    for (let i = 0; i < files.length; i++) {\n      formData.append(\"files\", files[i])\n    }\n\n    ArtService.artUpload(formData)\n      .then(res => {\n        console.log(\"res: \", res)\n        res.data.forEach(uploadFileInfo => {\n          uploadResult.push(uploadFileInfo)\n\n          dispatch(addFileList({ uuid: uploadFileInfo.uuid, file: uploadFileInfo }))\n        })\n        console.log(\"uploadResult Before\", uploadResult)\n        setUploadResult(uploadResult.slice(0))\n        console.log(\"uploadResult After\", uploadResult)\n    })\n  }\n\n  return (\n    <>\n      <div className=\"col-md-12 col-sm-12\">\n        <div className=\"form-group\">\n          <label htmlFor=\"message\" className=\"dark-color\">\n            파일 첨부\n          </label>\n          <input\n            type=\"file\"\n            name=\"files\"\n            accept=\"image/*\"\n            className=\"md-input style-02 input_white\"\n            id=\"files\"\n            multiple={true}\n            data-error=\"작품 파일을 첨부해주세요.\"\n            onChange={e => uploadFile(e)}\n          />\n          {fileList?.map(fileObj => {\n            return (\n              <ModifyFile key={fileObj.uuid} {...fileObj.file} />\n            )\n          })}\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default ModifyUpload"]},"metadata":{},"sourceType":"module"}